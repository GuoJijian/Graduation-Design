<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guojijian.pethospital.settings.mapper.EmployeeMapper">
  <resultMap id="BaseResultMap" type="com.guojijian.pethospital.settings.pojo.Employee">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    <id column="eid" jdbcType="CHAR" property="eid" />
    <result column="e_user_name" jdbcType="VARCHAR" property="eUserName" />
    <result column="e_password" jdbcType="VARCHAR" property="ePassword" />
    <result column="e_allow_ips" jdbcType="VARCHAR" property="eAllowIps" />
    <result column="e_email" jdbcType="VARCHAR" property="eEmail" />
    <result column="e_expire_time" jdbcType="CHAR" property="eExpireTime" />
    <result column="e_lock_state" jdbcType="CHAR" property="eLockState" />
    <result column="e_name" jdbcType="VARCHAR" property="eName" />
    <result column="e_gender" jdbcType="CHAR" property="eGender" />
    <result column="e_age" jdbcType="CHAR" property="eAge" />
    <result column="e_position" jdbcType="CHAR" property="ePosition" />
    <result column="e_department" jdbcType="CHAR" property="eDepartment" />
    <result column="e_phone" jdbcType="CHAR" property="ePhone" />
    <result column="grade" jdbcType="CHAR" property="grade" />
    <result column="od_type" jdbcType="CHAR" property="odType" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    delete from tbl_employee
    where eid = #{eid,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="com.guojijian.pethospital.settings.pojo.Employee">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    insert into tbl_employee (eid, e_user_name, e_password, 
      e_allow_ips, e_email, e_expire_time, 
      e_lock_state, e_name, e_gender, 
      e_age, e_position, e_department, 
      e_phone, grade)
    values (#{eid,jdbcType=CHAR}, #{eUserName,jdbcType=VARCHAR}, #{ePassword,jdbcType=VARCHAR}, 
      #{eAllowIps,jdbcType=VARCHAR}, #{eEmail,jdbcType=VARCHAR}, #{eExpireTime,jdbcType=CHAR}, 
      #{eLockState,jdbcType=CHAR}, #{eName,jdbcType=VARCHAR}, #{eGender,jdbcType=CHAR}, 
      #{eAge,jdbcType=CHAR}, #{ePosition,jdbcType=CHAR}, #{eDepartment,jdbcType=CHAR}, 
      #{ePhone,jdbcType=CHAR}, #{grade,jdbcType=CHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.guojijian.pethospital.settings.pojo.Employee">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    update tbl_employee
    set e_user_name = #{eUserName,jdbcType=VARCHAR},
      e_password = #{ePassword,jdbcType=VARCHAR},
      e_allow_ips = #{eAllowIps,jdbcType=VARCHAR},
      e_email = #{eEmail,jdbcType=VARCHAR},
      e_expire_time = #{eExpireTime,jdbcType=CHAR},
      e_lock_state = #{eLockState,jdbcType=CHAR},
      e_name = #{eName,jdbcType=VARCHAR},
      e_gender = #{eGender,jdbcType=CHAR},
      e_age = #{eAge,jdbcType=CHAR},
      e_position = #{ePosition,jdbcType=CHAR},
      e_department = #{eDepartment,jdbcType=CHAR},
      e_phone = #{ePhone,jdbcType=CHAR},
      grade = #{grade,jdbcType=CHAR}
    where eid = #{eid,jdbcType=CHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    select eid, e_user_name, e_password, e_allow_ips, e_email, e_expire_time, e_lock_state, 
    e_name, e_gender, e_age, e_position, e_department, e_phone, grade, od_type
    from tbl_employee
    where eid = #{eid,jdbcType=CHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 03 21:07:12 CST 2023.
    -->
    select eid, e_user_name, e_password, e_allow_ips, e_email, e_expire_time, e_lock_state, 
    e_name, e_gender, e_age, e_position, e_department, e_phone, grade
    from tbl_employee
  </select>

  <!--Employee selectEmployeeByActAndPwd(Employee employee);-->
  <select id="selectEmployeeByActAndPwd" resultMap="BaseResultMap">
    SELECT eid, e_user_name, e_password, e_allow_ips, e_email, e_expire_time, e_lock_state,
    e_name, e_gender, e_age, e_position, e_department, e_phone, grade
    FROM tbl_employee
    WHERE e_user_name=#{eUserName} AND e_password=#{ePassword}
  </select>

  <!--List<Employee> selectEmployeeForPageByCondition(Map<String ,Object> map);-->
  <select id="selectEmployeeForPageByCondition" resultMap="BaseResultMap">
    SELECT e.eid, e.e_user_name, e.e_password, e.e_allow_ips, e.e_email, e.e_expire_time, e.e_lock_state,
    e.e_name, e.e_gender, e.e_age,d1.value e_position,d2.value e_department, e.e_phone, e.grade,d3.value od_type
    FROM tbl_employee e
    JOIN tbl_dic_value d1 ON e.e_position=d1.id
    LEFT JOIN tbl_dic_value d2 ON e.e_department=d2.id
    LEFT JOIN tbl_dic_value d3 ON e.od_type=d3.id
    <where>
      <if test="name!=null and name!=''">
        e.e_name LIKE '%' #{name} '%'
      </if>
      <if test="department!=null and department!=''">
        AND e.e_department=#{department}
      </if>
      <if test="position!=null and position!=''">
        AND e.e_position=#{ePosition}
      </if>
      <if test="odType!=null and odType!='' and odType=='是'">
        AND e.od_type IS NOT NULL
      </if>
      <if test="odType!=null and odType!='' and odType=='否'">
        AND e.od_type IS NULL
      </if>
    </where>
  </select>

  <!--int insertEmployee(Employee employee);-->
  <insert id="insertEmployee">
    INSERT INTO tbl_employee(eid, e_user_name, e_password, e_allow_ips, e_email, e_expire_time, e_lock_state,
    e_name, e_gender, e_age, e_position, e_department, e_phone, grade ,od_type)
    VALUES(#{eid},#{eUserName},#{ePassword},#{eAllowIps},#{eEmail},#{eExpireTime},#{eLockState},#{eName},
    #{eGender},#{eAge},#{ePosition},#{eDepartment},#{ePhone},#{grade},#{odType})
  </insert>

  <!--int updateEmployee(Employee employee);-->
  <update id="updateEmployee">
    UPDATE tbl_employee SET e_user_name=#{eUserName}, e_password=#{ePassword}, e_allow_ips=#{eAllowIps}, e_email=#{eEmail},
    e_expire_time=#{eExpireTime}, e_lock_state=#{eLockState},e_name=#{eName}, e_gender=#{eGender}, e_age=#{eAge},
    e_position=#{ePosition}, e_department=#{eDepartment}, e_phone=#{ePhone}, grade=#{grade}, od_type=#{odType}
    WHERE eid=#{eid}
  </update>

  <!--int deleteEmployeeByIds(String[] ids);-->
  <delete id="deleteEmployeeByIds">
    DELETE FROM tbl_employee
    WHERE eid in
    <foreach collection="array" item="id" open="(" close=")" separator=",">
      #{id}
    </foreach>
  </delete>

  <!--Employee selectEmployeeForDetailById(String id);-->
  <select id="selectEmployeeForDetailById" resultMap="BaseResultMap">
    SELECT e.eid, e.e_user_name, e.e_password, e.e_allow_ips, e.e_email, e.e_expire_time, e.e_lock_state,
    e.e_name, e.e_gender, e.e_age,d1.value e_position,d2.value e_department, e.e_phone, e.grade,d3.value od_type
    FROM tbl_employee e
    JOIN tbl_dic_value d1 ON e.e_position=d1.id
    LEFT JOIN tbl_dic_value d2 ON e.e_department=d2.id
    LEFT JOIN tbl_dic_value d3 ON e.od_type=d3.id
    WHERE e.eid=#{id}
  </select>

  <!--List<Employee> selectDoctorForPageByCondition(Map<String,Object> map);-->
  <select id="selectDoctorForPageByCondition" resultMap="BaseResultMap">
    SELECT eid, e_user_name, e_password, e_allow_ips, e_email, e_expire_time, e_lock_state,
    e_name, e_gender, e_age, d1.value e_position, d2.value e_department, e_phone, grade , d3.value od_type
    FROM tbl_employee e
    JOIN tbl_dic_value d1 ON e.e_position=d1.id
    LEFT JOIN tbl_dic_value d2 ON e.e_department=d2.id
    LEFT JOIN tbl_dic_value d3 ON e.od_type=d3.id
    <where>
      e.grade='3'
      <if test="name!=null and name!=''">
        AND e.e_name LIKE '%' #{name} '%'
      </if>
      <if test="department!=null and department!=''">
        AND e.e_department=#{department}
      </if>
      <if test="position!=null and position!=''">
        AND e.e_position=#{ePosition}
      </if>
      <if test="odType!=null and odType!=''">
        AND e.od_type=#{odType}
      </if>
    </where>
  </select>
</mapper>